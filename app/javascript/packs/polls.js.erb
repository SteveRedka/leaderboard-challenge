var sleep = time => new Promise(resolve => setTimeout(resolve, time))
var poll = (promiseFn, time) => promiseFn().then(
             sleep(time).then(() => poll(promiseFn, time)))

poll(() => new Promise(() => {
  fetch('/shows/refresh_results', {
  method: 'GET'

  }).then((data) => {
    // document.getElementById('top-shows-table-container').innerHTML = ("<%%= render partial: 'top_shows_table' %>");
    })
}), 1000);
